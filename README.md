# Skill Agent Demo - AI å­¦ä¹ åŠ©æ‰‹

åŸºäº LLM çš„æ™ºèƒ½å­¦ä¹ åŠ©æ‰‹ï¼Œæ”¯æŒæ¦‚å¿µè®²è§£ã€ä¹ é¢˜ç”Ÿæˆã€é—ªå¡åˆ¶ä½œç­‰å¤šç§å­¦ä¹ åœºæ™¯ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¯åŠ¨æœåŠ¡

```bash
# ä¸€é”®å¯åŠ¨å‰åç«¯æœåŠ¡
bash start_services.sh

# æˆ–æ‰‹åŠ¨å¯åŠ¨
cd backend && uvicorn app.main:app --host 0.0.0.0 --port 28011 --reload
cd frontend && npm run dev -- --host 0.0.0.0 --port 28010
```

### æµ‹è¯•æ¥å£

```bash
# App API å®Œæ•´æµ‹è¯• (61è½®)
bash test_app.sh

# Web API å®Œæ•´æµ‹è¯• (30è½®, SSE æµå¼)
bash test_web.sh
```


## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. å¤šæŠ€èƒ½æ”¯æŒ
- **è®²è§£ (Explain)**: æ·±åº¦æ¦‚å¿µè§£é‡Šï¼ŒåŒ…å«ç›´è§‰ã€å®šä¹‰ã€ä¾‹å­
- **ç»ƒä¹  (Quiz)**: æ™ºèƒ½é¢˜ç›®ç”Ÿæˆï¼Œæ”¯æŒé€‰æ‹©ã€å¡«ç©ºã€ç®€ç­”ã€åˆ¤æ–­
- **é—ªå¡ (Flashcard)**: Anki é£æ ¼è®°å¿†å¡ç‰‡
- **æ€ç»´å¯¼å›¾ (Mindmap)**: ç»“æ„åŒ–çŸ¥è¯†å›¾è°±
- **ç¬”è®° (Notes)**: è‡ªåŠ¨æ•´ç†å­¦ä¹ ç¬”è®°
- **å­¦ä¹ åŒ… (Learning Bundle)**: ç»„åˆå¤šç§æŠ€èƒ½çš„å®Œæ•´å­¦ä¹ è·¯å¾„

### 2. æ™ºèƒ½ä¸Šä¸‹æ–‡ç®¡ç†ï¼ˆContext Engineeringï¼‰

åŸºäºä¸‰å¤§æ”¯æŸ±å®ç°é•¿å¯¹è¯åœºæ™¯ä¸‹çš„ token ä¼˜åŒ–ï¼š

#### ğŸ”¹ Offloading (ä¸Šä¸‹æ–‡å¸è½½)
- å¤§å‹ artifacts (> 500 tokens) è‡ªåŠ¨ä¿å­˜åˆ°æ–‡ä»¶ç³»ç»Ÿ/S3
- Context ä¸­åªä¿ç•™è½»é‡çº§å¼•ç”¨å’Œæ‘˜è¦
- **æ•ˆæœ**: å•ä¸ª artifact ä» ~2000 â†’ ~200 tokens (**90% å‹ç¼©**)

#### ğŸ”¹ Reduction (ä¸Šä¸‹æ–‡ç¼©å‡)
- ç›‘æ§ context ä½¿ç”¨ç‡ï¼Œè¶…è¿‡ 70% è‡ªåŠ¨è§¦å‘ç¼©å‡
- ä¿®å‰ª (Prune) å†—é•¿çš„ tool calls å’Œå†å²è¾“å‡º
- é€’å½’æ‘˜è¦ (Condense) æ—©æœŸå¯¹è¯è½®æ¬¡
- **æ•ˆæœ**: Context å¢é•¿ç‡ä» 83% â†’ 24%

#### ğŸ”¹ Retrieval (æŒ‰éœ€æ£€ç´¢)
- Agent å¯ä¸»åŠ¨è°ƒç”¨å·¥å…·æ£€ç´¢å†å²å†…å®¹
  - `read_artifact(artifact_id)` - è¯»å–å®Œæ•´å†…å®¹
  - `search_artifacts(query)` - è¯­ä¹‰æœç´¢
  - `list_artifacts(session_id)` - åˆ—å‡ºç´¢å¼•
- **æ•ˆæœ**: æŒ‰éœ€åŠ è½½ = æŒ‰éœ€ä»˜è´¹

**Token æ¶ˆè€—å¯¹æ¯”**:

| Turn | Before (å®Œæ•´åŠ è½½) | After (æ™ºèƒ½å¸è½½) | èŠ‚çœ |
|------|-------------------|------------------|------|
| 1    | 5,255             | 2,450            | -53% |
| 2    | 9,625             | 3,200            | -67% |
| 3    | 13,500            | 3,500            | -74% |
| 10   | ~35,000           | ~5,000           | **-86%** |

**å…³é”®çªç ´**: Context ä¸å†çº¿æ€§å¢é•¿ï¼Œæ”¯æŒ 10+ è½®é•¿å¯¹è¯ï¼

### 3. æ™ºèƒ½æ„å›¾è¯†åˆ«ï¼ˆIntent Routerï¼‰

**Phase 4 æ¶æ„**: çº¯ç²¹çš„ Skill Registry åŒ¹é…ï¼Œ0-token åˆ†ç±»

- âœ… åŸºäºå…³é”®è¯çš„å¿«é€ŸåŒ¹é…
- âœ… æ”¯æŒæ··åˆæ„å›¾æ£€æµ‹ï¼ˆå¦‚ï¼š"è®²è§£å…‰åˆä½œç”¨ï¼Œç»™æˆ‘3é“é¢˜"ï¼‰
- âœ… æ—  LLM fallbackï¼Œé¿å… token æµªè´¹

### 4. ä¼šè¯ç®¡ç†

- **æ™ºèƒ½åˆ†æ®µ**: åŸºäºå†…å®¹é•¿åº¦å’Œè¯­ä¹‰æ–­ç‚¹è‡ªåŠ¨åˆ›å»ºæ–°ä¼šè¯
- **ä¸Šä¸‹æ–‡ç»§æ‰¿**: æ–°ä¼šè¯ç»§æ‰¿å‰ä¸€ä¸ªä¼šè¯çš„å‹ç¼©æ‘˜è¦
- **S3 æŒä¹…åŒ–**: ä¼šè¯æ—¥å¿—å’Œ metadata è‡ªåŠ¨ä¸Šä¼ åˆ°äº‘ç«¯

## ğŸ“ é¡¹ç›®ç»“æ„

```
skill_agent_demo/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/              # FastAPI è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ core/             # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ context_artifact_manager.py    # ä¸Šä¸‹æ–‡å¸è½½
â”‚   â”‚   â”‚   â”œâ”€â”€ context_memory_manager.py      # ä¸Šä¸‹æ–‡ç¼©å‡
â”‚   â”‚   â”‚   â”œâ”€â”€ skill_orchestrator.py          # æŠ€èƒ½ç¼–æ’
â”‚   â”‚   â”‚   â”œâ”€â”€ intent_router.py               # æ„å›¾è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ memory_manager.py              # è®°å¿†ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ prompts/          # LLM Prompt æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ services/         # LLM å®¢æˆ·ç«¯ (Kimi)
â”‚   â”‚   â””â”€â”€ tools/            # Agent å·¥å…·é›†
â”‚   â”œâ”€â”€ skills/               # æŠ€èƒ½å®šä¹‰
â”‚   â””â”€â”€ scripts/              # æµ‹è¯•è„šæœ¬
â”œâ”€â”€ frontend/                 # React å‰ç«¯
â”œâ”€â”€ logs/                     # æ—¥å¿—ç›®å½•
â””â”€â”€ README.md
```

## ğŸ”§ é…ç½®

åˆ›å»º `backend/.env` æ–‡ä»¶ï¼š

```bash
# Gemini API é…ç½® (ä¸»è¦ LLM)
GEMINI_API_KEY=your_gemini_api_key
GEMINI_MODEL=gemini-2.5-flash

# Kimi API é…ç½® (å¯é€‰ï¼Œé€šè¿‡ Novita AI)
KIMI_API_KEY=your_novita_api_key
KIMI_MODEL=moonshotai/kimi-k2-thinking

# S3 é…ç½®
USE_S3_STORAGE=true
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key
AWS_S3_BUCKET=skill-agent-demo
AWS_REGION=us-east-1
```

## ğŸ§ª æµ‹è¯•åœºæ™¯

### App API æµ‹è¯• (æ¨è)
```bash
bash test_app.sh
```

æµ‹è¯•è¦†ç›– (61è½®è¿ç»­å¯¹è¯)ï¼š
- âœ… éšæœºå¯¹è¯ â†’ Intent: other
- âœ… æŠ€èƒ½è¯†åˆ« â†’ Quiz/Flashcard/Explain + 0-token
- âœ… Plan Skill â†’ å¤šæŠ€èƒ½ç»„åˆ
- âœ… ä¸Šä¸‹æ–‡ç®¡ç† â†’ å†å²å…³è” + å›æº¯æ£€ç´¢
- âœ… æ–‡ä»¶ä¸Šä¼  â†’ å›¾ç‰‡/æ–‡æ¡£/å¤šæ–‡ä»¶å¯¹æ¯”
- âœ… å¼•ç”¨æ–‡æœ¬ â†’ referenced_text + action_type
- âœ… åé¦ˆ API â†’ like/dislike/report

### Web API æµ‹è¯• (SSE æµå¼)
```bash
bash test_web.sh
```

æµ‹è¯•è¦†ç›– (30è½®)ï¼š
- âœ… SSE æµå¼è¾“å‡º
- âœ… Edit/Regenerate åŠŸèƒ½
- âœ… ç‰ˆæœ¬å†å² + æ ‘ç»“æ„
- âœ… Clear Session

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

- **Prompt ä¼˜åŒ–**: å¹³å‡å‡å°‘ 78% prompt tokens
  - explain: 22K â†’ 3.5K chars (-84%)
  - flashcard: 16K â†’ 3.6K chars (-77%)
  - quiz: 23K â†’ 5.1K chars (-78%)

- **ä¸Šä¸‹æ–‡å¸è½½**: èŠ‚çœ 70-86% tokensï¼ˆé•¿å¯¹è¯åœºæ™¯ï¼‰

- **å“åº”é€Ÿåº¦**: < 5s (ç®€å•æŸ¥è¯¢), < 15s (å¤æ‚ç”Ÿæˆ)

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [ARCHITECTURE.md](./ARCHITECTURE.md) - ç³»ç»Ÿæ¶æ„è¯¦è§£ (Context Engineering, Thinking Mode, Plan Skill)
- [CHANGELOG.md](./CHANGELOG.md) - å®Œæ•´æ›´æ–°æ—¥å¿—

## ğŸ“ å¼€å‘æ—¥å¿—

**æœ€æ–°æ›´æ–° (2024-12-22)**:
- âœ… åˆ‡æ¢ä¸» LLM ä¸º Gemini 2.5 Flash
- âœ… æ–°å¢ test_app.sh / test_web.sh å®Œæ•´æµ‹è¯•è„šæœ¬
- âœ… æ”¯æŒ SSE æµå¼è¾“å‡º (Web API)
- âœ… æ”¯æŒ Edit/Regenerate æ¶ˆæ¯åŠŸèƒ½
- âœ… æ”¯æŒæ–‡ä»¶ä¸Šä¼  (GCS å›¾ç‰‡/æ–‡æ¡£)

**å†å²æ›´æ–° (2024-11-24)**:
- âœ… å®ç° Context Engineering ä¸‰å¤§æ”¯æŸ±
- âœ… ä¼˜åŒ–æ‰€æœ‰ Skill Prompts (-78% tokens)
- âœ… æ™ºèƒ½æ€è€ƒæ¨¡å¼é€‰æ‹© (çœŸæ€è€ƒ vs ä¼ªæ€è€ƒ)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯

MIT License
